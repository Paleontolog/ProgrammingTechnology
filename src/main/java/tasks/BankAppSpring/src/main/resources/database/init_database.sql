CREATE SCHEMA IF NOT EXISTS BANK;


CREATE TABLE IF NOT EXISTS BANK.USER (
	ID IDENTITY NOT NULL PRIMARY KEY,
	LOGIN VARCHAR(255) NOT NULL UNIQUE,
	PASSWORD VARCHAR(255) NOT NULL,
	ADDRESS VARCHAR(255) NOT NULL,
	PHONE VARCHAR(255) NOT NULL UNIQUE
);

CREATE TABLE IF NOT EXISTS BANK.ACCOUNT (
	ID IDENTITY NOT NULL PRIMARY KEY,
	CLIENT_ID INT NOT NULL,
	AMOUNT NUMBER NOT NULL,
    ACC_CODE VARCHAR(255) NOT NULL,
    IS_MAIN INT NOT NULL,
    foreign key (CLIENT_ID) references BANK.USER(ID)
);

CREATE TABLE IF NOT EXISTS BANK.OPERATION (
	ID IDENTITY NOT NULL PRIMARY KEY,
	OPERATION_DATE DATE NOT NULL,
	FROM_ID INT NOT NULL,
	TO_ID INT NOT NULL,
	TRANS_AMOUNT NUMBER NOT NULL,
	BEFORE_TRANSFER NUMBER NOT NULL,
	AFTER_TRANSFER NUMBER NOT NULL,
	foreign key (FROM_ID) references BANK.ACCOUNT(ID),
	foreign key (TO_ID) references BANK.ACCOUNT(ID)
);